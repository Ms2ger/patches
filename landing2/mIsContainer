From: Ms2ger <ms2ger@gmail.com>

diff --git a/editor/libeditor/html/nsHTMLEditUtils.cpp b/editor/libeditor/html/nsHTMLEditUtils.cpp
--- a/editor/libeditor/html/nsHTMLEditUtils.cpp
+++ b/editor/libeditor/html/nsHTMLEditUtils.cpp
@@ -600,189 +600,171 @@ nsHTMLEditUtils::SupportsAlignAttr(nsIDO
 
 struct nsElementInfo
 {
 #ifdef DEBUG
   eHTMLTags mTag;
 #endif
   uint32_t mGroup;
   uint32_t mCanContainGroups;
-  bool mIsContainer;
   bool mCanContainSelf;
 };
 
 #ifdef DEBUG
-#define ELEM(_tag, _isContainer, _canContainSelf, _group, _canContainGroups) \
-  { eHTMLTag_##_tag, _group, _canContainGroups, _isContainer, _canContainSelf }
+#define ELEM(_tag, _canContainSelf, _group, _canContainGroups) \
+  { eHTMLTag_##_tag, _group, _canContainGroups, _canContainSelf }
 #else
-#define ELEM(_tag, _isContainer, _canContainSelf, _group, _canContainGroups) \
-  { _group, _canContainGroups, _isContainer, _canContainSelf }
+#define ELEM(_tag, _canContainSelf, _group, _canContainGroups) \
+  { _group, _canContainGroups, _canContainSelf }
 #endif
 
 static const nsElementInfo kElements[eHTMLTag_userdefined] = {
-  ELEM(a, true, false, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
-  ELEM(abbr, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
-  ELEM(acronym, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
-  ELEM(address, true, true, GROUP_BLOCK,
-       GROUP_INLINE_ELEMENT | GROUP_P),
-  ELEM(applet, true, true, GROUP_SPECIAL | GROUP_BLOCK,
+  ELEM(a, false, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
+  ELEM(abbr, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(acronym, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(address, true, GROUP_BLOCK, GROUP_INLINE_ELEMENT | GROUP_P),
+  ELEM(applet, true, GROUP_SPECIAL | GROUP_BLOCK,
        GROUP_FLOW_ELEMENT | GROUP_OBJECT_CONTENT),
-  ELEM(area, false, false, GROUP_MAP_CONTENT, GROUP_NONE),
-  ELEM(article, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(aside, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(area, false, GROUP_MAP_CONTENT, GROUP_NONE),
+  ELEM(article, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(aside, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
 #if defined(MOZ_MEDIA)
-  ELEM(audio, false, false, GROUP_NONE, GROUP_NONE),
+  ELEM(audio, false, GROUP_NONE, GROUP_NONE),
 #endif
-  ELEM(b, true, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
-  ELEM(base, false, false, GROUP_HEAD_CONTENT, GROUP_NONE),
-  ELEM(basefont, false, false, GROUP_SPECIAL, GROUP_NONE),
-  ELEM(bdo, true, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
-  ELEM(bgsound, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(big, true, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
-  ELEM(blink, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(blockquote, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(body, true, true, GROUP_TOPLEVEL, GROUP_FLOW_ELEMENT),
-  ELEM(br, false, false, GROUP_SPECIAL, GROUP_NONE),
-  ELEM(button, true, true, GROUP_FORMCONTROL | GROUP_BLOCK,
-       GROUP_FLOW_ELEMENT),
-  ELEM(canvas, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(caption, true, true, GROUP_NONE, GROUP_INLINE_ELEMENT),
-  ELEM(center, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(cite, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
-  ELEM(code, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
-  ELEM(col, false, false, GROUP_TABLE_CONTENT | GROUP_COLGROUP_CONTENT,
-       GROUP_NONE),
-  ELEM(colgroup, true, false, GROUP_NONE, GROUP_COLGROUP_CONTENT),
-  ELEM(datalist, true, false, GROUP_PHRASE,
-       GROUP_OPTIONS | GROUP_INLINE_ELEMENT),
-  ELEM(dd, true, false, GROUP_DL_CONTENT, GROUP_FLOW_ELEMENT),
-  ELEM(del, true, true, GROUP_PHRASE | GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(dfn, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
-  ELEM(dir, true, false, GROUP_BLOCK, GROUP_LI),
-  ELEM(div, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(dl, true, false, GROUP_BLOCK, GROUP_DL_CONTENT),
-  ELEM(dt, true, true, GROUP_DL_CONTENT, GROUP_INLINE_ELEMENT),
-  ELEM(em, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
-  ELEM(embed, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(fieldset, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(figcaption, true, false, GROUP_FIGCAPTION, GROUP_FLOW_ELEMENT),
-  ELEM(figure, true, true, GROUP_BLOCK,
-       GROUP_FLOW_ELEMENT | GROUP_FIGCAPTION),
-  ELEM(font, true, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
-  ELEM(footer, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(form, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(frame, false, false, GROUP_FRAME, GROUP_NONE),
-  ELEM(frameset, true, true, GROUP_FRAME, GROUP_FRAME),
-  ELEM(h1, true, false, GROUP_BLOCK | GROUP_HEADING,
-       GROUP_INLINE_ELEMENT),
-  ELEM(h2, true, false, GROUP_BLOCK | GROUP_HEADING,
-       GROUP_INLINE_ELEMENT),
-  ELEM(h3, true, false, GROUP_BLOCK | GROUP_HEADING,
-       GROUP_INLINE_ELEMENT),
-  ELEM(h4, true, false, GROUP_BLOCK | GROUP_HEADING,
-       GROUP_INLINE_ELEMENT),
-  ELEM(h5, true, false, GROUP_BLOCK | GROUP_HEADING,
-       GROUP_INLINE_ELEMENT),
-  ELEM(h6, true, false, GROUP_BLOCK | GROUP_HEADING,
-       GROUP_INLINE_ELEMENT),
-  ELEM(head, true, false, GROUP_TOPLEVEL, GROUP_HEAD_CONTENT),
-  ELEM(header, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(hgroup, true, false, GROUP_BLOCK, GROUP_HEADING),
-  ELEM(hr, false, false, GROUP_BLOCK, GROUP_NONE),
-  ELEM(html, true, false, GROUP_TOPLEVEL, GROUP_TOPLEVEL),
-  ELEM(i, true, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
-  ELEM(iframe, true, true, GROUP_SPECIAL | GROUP_BLOCK,
-       GROUP_FLOW_ELEMENT),
-  ELEM(image, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(img, false, false, GROUP_SPECIAL, GROUP_NONE),
-  ELEM(input, false, false, GROUP_FORMCONTROL, GROUP_NONE),
-  ELEM(ins, true, true, GROUP_PHRASE | GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(kbd, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
-  ELEM(keygen, false, false, GROUP_FORMCONTROL, GROUP_NONE),
-  ELEM(label, true, false, GROUP_FORMCONTROL, GROUP_INLINE_ELEMENT),
-  ELEM(legend, true, true, GROUP_NONE, GROUP_INLINE_ELEMENT),
-  ELEM(li, true, false, GROUP_LI, GROUP_FLOW_ELEMENT),
-  ELEM(link, false, false, GROUP_HEAD_CONTENT, GROUP_NONE),
-  ELEM(listing, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(map, true, true, GROUP_SPECIAL, GROUP_BLOCK | GROUP_MAP_CONTENT),
-  ELEM(mark, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
-  ELEM(marquee, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(menu, true, true, GROUP_BLOCK, GROUP_LI | GROUP_FLOW_ELEMENT),
-  ELEM(menuitem, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(meta, false, false, GROUP_HEAD_CONTENT, GROUP_NONE),
-  ELEM(multicol, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(nav, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(nobr, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(noembed, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(noframes, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(noscript, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(object, true, true, GROUP_SPECIAL | GROUP_BLOCK,
+  ELEM(b, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
+  ELEM(base, false, GROUP_HEAD_CONTENT, GROUP_NONE),
+  ELEM(basefont, false, GROUP_SPECIAL, GROUP_NONE),
+  ELEM(bdo, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
+  ELEM(bgsound, false, GROUP_NONE, GROUP_NONE),
+  ELEM(big, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
+  ELEM(blink, false, GROUP_NONE, GROUP_NONE),
+  ELEM(blockquote, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(body, true, GROUP_TOPLEVEL, GROUP_FLOW_ELEMENT),
+  ELEM(br, false, GROUP_SPECIAL, GROUP_NONE),
+  ELEM(button, true, GROUP_FORMCONTROL | GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(canvas, false, GROUP_NONE, GROUP_NONE),
+  ELEM(caption, true, GROUP_NONE, GROUP_INLINE_ELEMENT),
+  ELEM(center, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(cite, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(code, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(col, false, GROUP_TABLE_CONTENT | GROUP_COLGROUP_CONTENT, GROUP_NONE),
+  ELEM(colgroup, false, GROUP_NONE, GROUP_COLGROUP_CONTENT),
+  ELEM(datalist, false, GROUP_PHRASE, GROUP_OPTIONS | GROUP_INLINE_ELEMENT),
+  ELEM(dd, false, GROUP_DL_CONTENT, GROUP_FLOW_ELEMENT),
+  ELEM(del, true, GROUP_PHRASE | GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(dfn, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(dir, false, GROUP_BLOCK, GROUP_LI),
+  ELEM(div, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(dl, false, GROUP_BLOCK, GROUP_DL_CONTENT),
+  ELEM(dt, true, GROUP_DL_CONTENT, GROUP_INLINE_ELEMENT),
+  ELEM(em, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(embed, false, GROUP_NONE, GROUP_NONE),
+  ELEM(fieldset, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(figcaption, false, GROUP_FIGCAPTION, GROUP_FLOW_ELEMENT),
+  ELEM(figure, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT | GROUP_FIGCAPTION),
+  ELEM(font, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
+  ELEM(footer, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(form, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(frame, false, GROUP_FRAME, GROUP_NONE),
+  ELEM(frameset, true, GROUP_FRAME, GROUP_FRAME),
+  ELEM(h1, false, GROUP_BLOCK | GROUP_HEADING, GROUP_INLINE_ELEMENT),
+  ELEM(h2, false, GROUP_BLOCK | GROUP_HEADING, GROUP_INLINE_ELEMENT),
+  ELEM(h3, false, GROUP_BLOCK | GROUP_HEADING, GROUP_INLINE_ELEMENT),
+  ELEM(h4, false, GROUP_BLOCK | GROUP_HEADING, GROUP_INLINE_ELEMENT),
+  ELEM(h5, false, GROUP_BLOCK | GROUP_HEADING, GROUP_INLINE_ELEMENT),
+  ELEM(h6, false, GROUP_BLOCK | GROUP_HEADING, GROUP_INLINE_ELEMENT),
+  ELEM(head, false, GROUP_TOPLEVEL, GROUP_HEAD_CONTENT),
+  ELEM(header, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(hgroup, false, GROUP_BLOCK, GROUP_HEADING),
+  ELEM(hr, false, GROUP_BLOCK, GROUP_NONE),
+  ELEM(html, false, GROUP_TOPLEVEL, GROUP_TOPLEVEL),
+  ELEM(i, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
+  ELEM(iframe, true, GROUP_SPECIAL | GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(image, false, GROUP_NONE, GROUP_NONE),
+  ELEM(img, false, GROUP_SPECIAL, GROUP_NONE),
+  ELEM(input, false, GROUP_FORMCONTROL, GROUP_NONE),
+  ELEM(ins, true, GROUP_PHRASE | GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(kbd, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(keygen, false, GROUP_FORMCONTROL, GROUP_NONE),
+  ELEM(label, false, GROUP_FORMCONTROL, GROUP_INLINE_ELEMENT),
+  ELEM(legend, true, GROUP_NONE, GROUP_INLINE_ELEMENT),
+  ELEM(li, false, GROUP_LI, GROUP_FLOW_ELEMENT),
+  ELEM(link, false, GROUP_HEAD_CONTENT, GROUP_NONE),
+  ELEM(listing, false, GROUP_NONE, GROUP_NONE),
+  ELEM(map, true, GROUP_SPECIAL, GROUP_BLOCK | GROUP_MAP_CONTENT),
+  ELEM(mark, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(marquee, false, GROUP_NONE, GROUP_NONE),
+  ELEM(menu, true, GROUP_BLOCK, GROUP_LI | GROUP_FLOW_ELEMENT),
+  ELEM(menuitem, false, GROUP_NONE, GROUP_NONE),
+  ELEM(meta, false, GROUP_HEAD_CONTENT, GROUP_NONE),
+  ELEM(multicol, false, GROUP_NONE, GROUP_NONE),
+  ELEM(nav, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(nobr, false, GROUP_NONE, GROUP_NONE),
+  ELEM(noembed, false, GROUP_NONE, GROUP_NONE),
+  ELEM(noframes, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(noscript, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(object, true, GROUP_SPECIAL | GROUP_BLOCK,
        GROUP_FLOW_ELEMENT | GROUP_OBJECT_CONTENT),
   // XXX Can contain self and ul because editor does sublists illegally.
-  ELEM(ol, true, true, GROUP_BLOCK | GROUP_OL_UL,
-       GROUP_LI | GROUP_OL_UL),
-  ELEM(optgroup, true, false, GROUP_SELECT_CONTENT,
-       GROUP_OPTIONS),
-  ELEM(option, true, false,
-       GROUP_SELECT_CONTENT | GROUP_OPTIONS, GROUP_LEAF),
-  ELEM(output, true, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
-  ELEM(p, true, false, GROUP_BLOCK | GROUP_P, GROUP_INLINE_ELEMENT),
-  ELEM(param, false, false, GROUP_OBJECT_CONTENT, GROUP_NONE),
-  ELEM(plaintext, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(pre, true, true, GROUP_BLOCK, GROUP_INLINE_ELEMENT),
-  ELEM(progress, true, false, GROUP_SPECIAL, GROUP_FLOW_ELEMENT),
-  ELEM(q, true, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
-  ELEM(s, true, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
-  ELEM(samp, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
-  ELEM(script, true, false, GROUP_HEAD_CONTENT | GROUP_SPECIAL,
-       GROUP_LEAF),
-  ELEM(section, true, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
-  ELEM(select, true, false, GROUP_FORMCONTROL, GROUP_SELECT_CONTENT),
-  ELEM(small, true, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
+  ELEM(ol, true, GROUP_BLOCK | GROUP_OL_UL, GROUP_LI | GROUP_OL_UL),
+  ELEM(optgroup, false, GROUP_SELECT_CONTENT, GROUP_OPTIONS),
+  ELEM(option, false, GROUP_SELECT_CONTENT | GROUP_OPTIONS, GROUP_LEAF),
+  ELEM(output, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
+  ELEM(p, false, GROUP_BLOCK | GROUP_P, GROUP_INLINE_ELEMENT),
+  ELEM(param, false, GROUP_OBJECT_CONTENT, GROUP_NONE),
+  ELEM(plaintext, false, GROUP_NONE, GROUP_NONE),
+  ELEM(pre, true, GROUP_BLOCK, GROUP_INLINE_ELEMENT),
+  ELEM(progress, false, GROUP_SPECIAL, GROUP_FLOW_ELEMENT),
+  ELEM(q, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
+  ELEM(s, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
+  ELEM(samp, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(script, false, GROUP_HEAD_CONTENT | GROUP_SPECIAL, GROUP_LEAF),
+  ELEM(section, true, GROUP_BLOCK, GROUP_FLOW_ELEMENT),
+  ELEM(select, false, GROUP_FORMCONTROL, GROUP_SELECT_CONTENT),
+  ELEM(small, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
 #if defined(MOZ_MEDIA)
-  ELEM(source, false, false, GROUP_NONE, GROUP_NONE),
+  ELEM(source, false, GROUP_NONE, GROUP_NONE),
 #endif
-  ELEM(span, true, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
-  ELEM(strike, true, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
-  ELEM(strong, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
-  ELEM(style, true, false, GROUP_HEAD_CONTENT, GROUP_LEAF),
-  ELEM(sub, true, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
-  ELEM(sup, true, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
-  ELEM(table, true, false, GROUP_BLOCK, GROUP_TABLE_CONTENT),
-  ELEM(tbody, true, false, GROUP_TABLE_CONTENT, GROUP_TBODY_CONTENT),
-  ELEM(td, true, false, GROUP_TR_CONTENT, GROUP_FLOW_ELEMENT),
-  ELEM(textarea, true, false, GROUP_FORMCONTROL, GROUP_LEAF),
-  ELEM(tfoot, true, false, GROUP_NONE, GROUP_TBODY_CONTENT),
-  ELEM(th, true, false, GROUP_TR_CONTENT, GROUP_FLOW_ELEMENT),
-  ELEM(thead, true, false, GROUP_NONE, GROUP_TBODY_CONTENT),
-  ELEM(title, true, false, GROUP_HEAD_CONTENT, GROUP_LEAF),
-  ELEM(tr, true, false, GROUP_TBODY_CONTENT, GROUP_TR_CONTENT),
-  ELEM(tt, true, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
-  ELEM(u, true, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
+  ELEM(span, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
+  ELEM(strike, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
+  ELEM(strong, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(style, false, GROUP_HEAD_CONTENT, GROUP_LEAF),
+  ELEM(sub, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
+  ELEM(sup, true, GROUP_SPECIAL, GROUP_INLINE_ELEMENT),
+  ELEM(table, false, GROUP_BLOCK, GROUP_TABLE_CONTENT),
+  ELEM(tbody, false, GROUP_TABLE_CONTENT, GROUP_TBODY_CONTENT),
+  ELEM(td, false, GROUP_TR_CONTENT, GROUP_FLOW_ELEMENT),
+  ELEM(textarea, false, GROUP_FORMCONTROL, GROUP_LEAF),
+  ELEM(tfoot, false, GROUP_NONE, GROUP_TBODY_CONTENT),
+  ELEM(th, false, GROUP_TR_CONTENT, GROUP_FLOW_ELEMENT),
+  ELEM(thead, false, GROUP_NONE, GROUP_TBODY_CONTENT),
+  ELEM(title, false, GROUP_HEAD_CONTENT, GROUP_LEAF),
+  ELEM(tr, false, GROUP_TBODY_CONTENT, GROUP_TR_CONTENT),
+  ELEM(tt, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
+  ELEM(u, true, GROUP_FONTSTYLE, GROUP_INLINE_ELEMENT),
   // XXX Can contain self and ol because editor does sublists illegally.
-  ELEM(ul, true, true, GROUP_BLOCK | GROUP_OL_UL,
-       GROUP_LI | GROUP_OL_UL),
-  ELEM(var, true, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
+  ELEM(ul, true, GROUP_BLOCK | GROUP_OL_UL, GROUP_LI | GROUP_OL_UL),
+  ELEM(var, true, GROUP_PHRASE, GROUP_INLINE_ELEMENT),
 #if defined(MOZ_MEDIA)
-  ELEM(video, false, false, GROUP_NONE, GROUP_NONE),
+  ELEM(video, false, GROUP_NONE, GROUP_NONE),
 #endif
-  ELEM(wbr, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(xmp, false, false, GROUP_NONE, GROUP_NONE),
+  ELEM(wbr, false, GROUP_NONE, GROUP_NONE),
+  ELEM(xmp, false, GROUP_NONE, GROUP_NONE),
 
   // These aren't elements.
-  ELEM(text, false, false, GROUP_LEAF, GROUP_NONE),
-  ELEM(whitespace, false, false, GROUP_LEAF, GROUP_NONE),
-  ELEM(newline, false, false, GROUP_LEAF, GROUP_NONE),
-  ELEM(comment, false, false, GROUP_LEAF, GROUP_NONE),
-  ELEM(entity, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(doctypeDecl, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(markupDecl, false, false, GROUP_NONE, GROUP_NONE),
-  ELEM(instruction, false, false, GROUP_NONE, GROUP_NONE),
+  ELEM(text, false, GROUP_LEAF, GROUP_NONE),
+  ELEM(whitespace, false, GROUP_LEAF, GROUP_NONE),
+  ELEM(newline, false, GROUP_LEAF, GROUP_NONE),
+  ELEM(comment, false, GROUP_LEAF, GROUP_NONE),
+  ELEM(entity, false, GROUP_NONE, GROUP_NONE),
+  ELEM(doctypeDecl, false, GROUP_NONE, GROUP_NONE),
+  ELEM(markupDecl, false, GROUP_NONE, GROUP_NONE),
+  ELEM(instruction, false, GROUP_NONE, GROUP_NONE),
 
-  ELEM(userdefined, true, false, GROUP_NONE, GROUP_FLOW_ELEMENT)
+  ELEM(userdefined, false, GROUP_NONE, GROUP_FLOW_ELEMENT)
 };
 
 bool
 nsHTMLEditUtils::CanContain(int32_t aParent, int32_t aChild)
 {
   NS_ASSERTION(aParent > eHTMLTag_unknown && aParent <= eHTMLTag_userdefined,
                "aParent out of range!");
   NS_ASSERTION(aChild > eHTMLTag_unknown && aChild <= eHTMLTag_userdefined,
